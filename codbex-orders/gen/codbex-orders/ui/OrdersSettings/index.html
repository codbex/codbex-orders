<!--

    Generated by Eclipse Dirigible based on model and template.

    Do not modify the content as it may be re-generated again.

-->
<!DOCTYPE html>
<html lang="en" ng-app="app" ng-controller="ApplicationController" xmlns="http://www.w3.org/1999/xhtml">

    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title config-title></title>
        <link rel="icon" sizes="any" href="data:;base64,iVBORw0KGgo=" />
        <script type="text/javascript" src="perspective.js"></script>
        <script type="text/javascript" src="/services/js/platform-core/services/loader.js?id=perspective-js"></script>
        <link type="text/css" rel="stylesheet" href="/services/js/platform-core/services/loader.js?id=perspective-css" />
    </head>

    <body>
        <layout ng-if="!state.error && !state.isBusy" config="::layoutConfig"></layout>
        <bk-busy-indicator-extended ng-if="!state.error && state.isBusy" class="bk-fill-parent" size="l">
            {{'codbex-orders:state.busy' | t}}
        </bk-busy-indicator-extended>
        <bk-message-page glyph="sap-icon--error" ng-if="state.error">
            <bk-message-page-title>{{'codbex-orders:messages.error.loading' | t}}</bk-message-page-title>
        </bk-message-page>
        <script type="text/javascript">
            angular.module('app', ['platformView', 'platformLayout', 'platformLocale', 'blimpKit']).controller('ApplicationController', ($scope, Extensions) => {
                $scope.state = {
                    isBusy: true,
                    error: false,
                };
                Extensions.getViews().then((response) => {
                    $scope.$evalAsync(() => {
                        $scope.layoutConfig = {
                            views: response.data.filter(e => !e.isLaunchpad && e.perspectiveName === perspectiveData.id).map(e => e.id),
                        };
                        $scope.state.isBusy = false;
                    });
                }, (error) => {
                    console.error(error);
                    $scope.state.error = true;
                });
            });
        </script>
        <theme></theme>
    </body>

</html>
